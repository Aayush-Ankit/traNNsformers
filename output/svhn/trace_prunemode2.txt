/home/min/a/aankit/AA/ReSpArch-SpintronicSNNProcessor_DAC_2017/Matlab/spiking_relu_conversion-master/dlt_cnn_map_dropout_nobiasnn/data/svhn_uint8.matHardware Parameters for original network
Number of mPEs needed before transformation: 76800
Number of mPEs needed before transformation: 90000
Number of mPEs needed before transformation: 900
Pruned percentage of Layer 1 : 0.00%.
Pruned percentage of Layer 2 : 0.00%.
Pruned percentage of Layer 3 : 0.00%.
increasing the pruning threshold err_prev = 1.0000	 err_crr = 0.4482
check if the prune value in cluster_prune.m get updated to top level nn
Layer 1 Pruned after cluster pruning : 0.00
Layer 2 Pruned after cluster pruning : 0.00
Layer 3 Pruned after cluster pruning : 0.00
epoch 1/10. Took 9.8729 seconds. Mini-batch mean squared error on training set is 0.45131; Full-batch train err = 0.448219
Base_quality for clustering: 0.700000
Fraction of synapses unclustered = 0.5683
clustering takes 6.02 seconds
Pruned percentage of Layer 1 : 2.85%.
Base_quality for clustering: 0.700000
Fraction of synapses unclustered = 0.3708
clustering takes 13.88 seconds
Pruned percentage of Layer 2 : 1.85%.
Base_quality for clustering: 0.700000
Fraction of synapses unclustered = 0.5458
clustering takes 1.89 seconds
Pruned percentage of Layer 3 : 13.63%.
increasing the pruning threshold err_prev = 0.4482	 err_crr = 0.4476
check if the prune value in cluster_prune.m get updated to top level nn
Layer 1 Pruned after cluster pruning : 2.85
Layer 2 Pruned after cluster pruning : 1.85
Layer 3 Pruned after cluster pruning : 13.63
epoch 2/10. Took 9.8784 seconds. Mini-batch mean squared error on training set is 0.44841; Full-batch train err = 0.447621
Layer: 1 	 unclustered current: 0.539871 	 unclustered previous: 0.000000
Pruning continues...
Pruned percentage of Layer 1 : 5.71%.
Layer: 2 	 unclustered current: 0.352257 	 unclustered previous: 0.000000
Pruning continues...
Pruned percentage of Layer 2 : 3.71%.
Layer: 3 	 unclustered current: 0.409500 	 unclustered previous: 0.000000
Pruning continues...
Pruned percentage of Layer 3 : 26.06%.
increasing the pruning threshold err_prev = 0.4476	 err_crr = 0.4417
check if the prune value in cluster_prune.m get updated to top level nn
Layer 1 Pruned after cluster pruning : 5.71
Layer 2 Pruned after cluster pruning : 3.71
Layer 3 Pruned after cluster pruning : 26.06
epoch 3/10. Took 9.6802 seconds. Mini-batch mean squared error on training set is 0.44638; Full-batch train err = 0.441667
Layer: 1 	 unclustered current: 0.511255 	 unclustered previous: 0.539871
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.5035
clustering takes 6.67 seconds
Pruning continues...
Pruned percentage of Layer 1 : 8.42%.
Layer: 2 	 unclustered current: 0.333716 	 unclustered previous: 0.352257
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.2734
clustering takes 5.05 seconds
Pruning continues...
Pruned percentage of Layer 2 : 4.76%.
Layer: 3 	 unclustered current: 0.285250 	 unclustered previous: 0.409500
Pruning continues...
Pruned percentage of Layer 3 : 34.97%.
increasing the pruning threshold err_prev = 0.4417	 err_crr = 0.4353
check if the prune value in cluster_prune.m get updated to top level nn
Layer 1 Pruned after cluster pruning : 8.42
Layer 2 Pruned after cluster pruning : 4.76
Layer 3 Pruned after cluster pruning : 34.97
epoch 4/10. Took 9.7948 seconds. Mini-batch mean squared error on training set is 0.4391; Full-batch train err = 0.435309
Layer: 1 	 unclustered current: 0.475581 	 unclustered previous: 0.511255
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.4746
clustering takes 1.28 seconds
Pruning continues...
Pruned percentage of Layer 1 : 11.17%.
Layer: 2 	 unclustered current: 0.257765 	 unclustered previous: 0.333716
Pruning continues...
Pruned percentage of Layer 2 : 6.30%.
Layer: 3 	 unclustered current: 0.196167 	 unclustered previous: 0.285250
Pruning continues...
Pruned percentage of Layer 3 : 38.91%.
increasing the pruning threshold err_prev = 0.4353	 err_crr = 0.4345
check if the prune value in cluster_prune.m get updated to top level nn
Layer 1 Pruned after cluster pruning : 11.17
Layer 2 Pruned after cluster pruning : 6.30
Layer 3 Pruned after cluster pruning : 38.91
epoch 5/10. Took 9.8426 seconds. Mini-batch mean squared error on training set is 0.43637; Full-batch train err = 0.434473
Layer: 1 	 unclustered current: 0.446992 	 unclustered previous: 0.475581
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.4470
clustering takes 0.64 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.4419
clustering takes 2.99 seconds
Pruning continues...
Pruned percentage of Layer 1 : 13.72%.
Layer: 2 	 unclustered current: 0.242327 	 unclustered previous: 0.257765
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.1705
clustering takes 4.30 seconds
Pruning continues...
Pruned percentage of Layer 2 : 5.76%.
Layer: 3 	 unclustered current: 0.156750 	 unclustered previous: 0.196167
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.1568
clustering takes 0.06 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.1568
clustering takes 0.06 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.1568
clustering takes 0.06 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.1568
clustering takes 0.06 seconds
Base_quality tried for clustering: 0.300000
Fraction of synapses unclustered = 0.1568
clustering takes 0.06 seconds
Pruning continues...
Pruned percentage of Layer 3 : 40.46%.
increasing the pruning threshold err_prev = 0.4345	 err_crr = 0.4251
check if the prune value in cluster_prune.m get updated to top level nn
Layer 1 Pruned after cluster pruning : 13.72
Layer 2 Pruned after cluster pruning : 5.76
Layer 3 Pruned after cluster pruning : 40.46
epoch 6/10. Took 10.1739 seconds. Mini-batch mean squared error on training set is 0.42984; Full-batch train err = 0.425067
Layer: 1 	 unclustered current: 0.415338 	 unclustered previous: 0.446992
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.4153
clustering takes 0.73 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.4153
clustering takes 0.69 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.4047
clustering takes 3.95 seconds
Pruning continues...
Pruned percentage of Layer 1 : 15.94%.
Layer: 2 	 unclustered current: 0.159922 	 unclustered previous: 0.242327
Pruning continues...
Pruned percentage of Layer 2 : 6.82%.
Layer: 3 	 unclustered current: 0.141250 	 unclustered previous: 0.156750
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.1412
clustering takes 0.05 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.1412
clustering takes 0.06 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.1412
clustering takes 0.06 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.1412
clustering takes 0.05 seconds
Base_quality tried for clustering: 0.300000
Fraction of synapses unclustered = 0.1390
clustering takes 0.11 seconds
Pruning continues...
Pruned percentage of Layer 3 : 41.71%.
increasing the pruning threshold err_prev = 0.4251	 err_crr = 0.4192
check if the prune value in cluster_prune.m get updated to top level nn
Layer 1 Pruned after cluster pruning : 15.94
Layer 2 Pruned after cluster pruning : 6.82
Layer 3 Pruned after cluster pruning : 41.71
epoch 7/10. Took 10.1792 seconds. Mini-batch mean squared error on training set is 0.42779; Full-batch train err = 0.419170
Layer: 1 	 unclustered current: 0.379365 	 unclustered previous: 0.415338
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.3794
clustering takes 0.78 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.3794
clustering takes 0.78 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.3794
clustering takes 0.78 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.3591
clustering takes 4.50 seconds
Pruning continues...
Pruned percentage of Layer 1 : 17.51%.
Layer: 2 	 unclustered current: 0.149299 	 unclustered previous: 0.159922
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.1493
clustering takes 0.94 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.1493
clustering takes 0.88 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.1493
clustering takes 0.91 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.1493
clustering takes 0.87 seconds
Base_quality tried for clustering: 0.300000
Fraction of synapses unclustered = 0.1469
clustering takes 2.14 seconds
Pruning continues...
Pruned percentage of Layer 2 : 7.76%.
Layer: 3 	 unclustered current: 0.125500 	 unclustered previous: 0.141250
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.1255
clustering takes 0.07 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.1255
clustering takes 0.06 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.1255
clustering takes 0.06 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.1255
clustering takes 0.06 seconds
Base_quality tried for clustering: 0.300000
Fraction of synapses unclustered = 0.1255
clustering takes 0.06 seconds
Pruning continues...
Pruned percentage of Layer 3 : 42.74%.
increasing the pruning threshold err_prev = 0.4192	 err_crr = 0.4087
check if the prune value in cluster_prune.m get updated to top level nn
Layer 1 Pruned after cluster pruning : 17.51
Layer 2 Pruned after cluster pruning : 7.76
Layer 3 Pruned after cluster pruning : 42.74
epoch 8/10. Took 10.1823 seconds. Mini-batch mean squared error on training set is 0.42367; Full-batch train err = 0.408733
Layer: 1 	 unclustered current: 0.335290 	 unclustered previous: 0.379365
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.3353
clustering takes 0.71 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.3353
clustering takes 0.84 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.3353
clustering takes 0.76 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.3275
clustering takes 3.94 seconds
Pruning continues...
Pruned percentage of Layer 1 : 19.31%.
Layer: 2 	 unclustered current: 0.136451 	 unclustered previous: 0.149299
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.1365
clustering takes 0.92 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.1365
clustering takes 0.92 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.1365
clustering takes 0.87 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.1365
clustering takes 0.88 seconds
Base_quality tried for clustering: 0.300000
Fraction of synapses unclustered = 0.1365
clustering takes 0.86 seconds
Pruning continues...
Pruned percentage of Layer 2 : 8.77%.
Layer: 3 	 unclustered current: 0.115167 	 unclustered previous: 0.125500
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.1152
clustering takes 0.05 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.1152
clustering takes 0.05 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.1152
clustering takes 0.05 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.1152
clustering takes 0.05 seconds
Base_quality tried for clustering: 0.300000
Fraction of synapses unclustered = 0.1152
clustering takes 0.05 seconds
Pruning continues...
Pruned percentage of Layer 3 : 43.60%.
increasing the pruning threshold err_prev = 0.4087	 err_crr = 0.4035
Cluster prune starts 
Layer 1 Pruned before cluster pruning : 19.31
Layer 2 Pruned before cluster pruning : 8.77
Layer 3 Pruned before cluster pruning : 43.60
Remaining clusters in Layer 1 during cluster_pruning: 221 	 pruned: 27.53
Fraction of synapses unclustered = 0.3056
Remaining clusters in Layer 2 during cluster_pruning: 467 	 pruned: 27.02
Fraction of synapses unclustered = 0.1263
Remaining clusters in Layer 3 during cluster_pruning: 8 	 pruned: 43.60
Fraction of synapses unclustered = 0.1066
breaking off the cluster_prune loop due to accuracy degradation
Layer 1 Pruned after cluster pruning : 19.31
Layer 2 Pruned after cluster pruning : 8.77
Layer 3 Pruned after cluster pruning : 43.60
Accuracy on training set after this group prune: 58.32%.
check if the prune value in cluster_prune.m get updated to top level nn
Layer 1 Pruned after cluster pruning : 19.31
Layer 2 Pruned after cluster pruning : 8.77
Layer 3 Pruned after cluster pruning : 43.60
epoch 9/10. Took 10.433 seconds. Mini-batch mean squared error on training set is 0.42282; Full-batch train err = 0.403491
Layer: 1 	 unclustered current: 0.305614 	 unclustered previous: 0.335290
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.3056
clustering takes 0.72 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.3056
clustering takes 0.72 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.3056
clustering takes 0.80 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.3056
clustering takes 0.72 seconds
Base_quality tried for clustering: 0.300000
Fraction of synapses unclustered = 0.2995
clustering takes 3.01 seconds
Pruning continues...
Pruned percentage of Layer 1 : 20.97%.
Layer: 2 	 unclustered current: 0.126299 	 unclustered previous: 0.136451
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.1263
clustering takes 0.88 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.1263
clustering takes 0.86 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.1263
clustering takes 1.04 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.1263
clustering takes 0.89 seconds
Base_quality tried for clustering: 0.300000
Fraction of synapses unclustered = 0.1263
clustering takes 0.90 seconds
Pruning continues...
Pruned percentage of Layer 2 : 9.76%.
Layer: 3 	 unclustered current: 0.106583 	 unclustered previous: 0.115167
Clustering of unclustered synapses being tried...
Base_quality tried for clustering: 0.700000
Fraction of synapses unclustered = 0.1066
clustering takes 0.05 seconds
Base_quality tried for clustering: 0.600000
Fraction of synapses unclustered = 0.1066
clustering takes 0.05 seconds
Base_quality tried for clustering: 0.500000
Fraction of synapses unclustered = 0.1066
clustering takes 0.05 seconds
Base_quality tried for clustering: 0.400000
Fraction of synapses unclustered = 0.1066
clustering takes 0.05 seconds
Base_quality tried for clustering: 0.300000
Fraction of synapses unclustered = 0.1066
clustering takes 0.05 seconds
Pruning continues...
Pruned percentage of Layer 3 : 44.39%.
increasing the pruning threshold err_prev = 0.4035	 err_crr = 0.4023
Cluster prune starts 
Layer 1 Pruned before cluster pruning : 20.97
Layer 2 Pruned before cluster pruning : 9.76
Layer 3 Pruned before cluster pruning : 44.39
Remaining clusters in Layer 1 during cluster_pruning: 252 	 pruned: 30.38
Fraction of synapses unclustered = 0.2791
Remaining clusters in Layer 2 during cluster_pruning: 467 	 pruned: 28.02
Fraction of synapses unclustered = 0.1164
Remaining clusters in Layer 3 during cluster_pruning: 8 	 pruned: 44.39
Fraction of synapses unclustered = 0.0987
breaking off the cluster_prune loop due to accuracy degradation
Layer 1 Pruned after cluster pruning : 20.97
Layer 2 Pruned after cluster pruning : 9.76
Layer 3 Pruned after cluster pruning : 44.39
Accuracy on training set after this group prune: 58.36%.
check if the prune value in cluster_prune.m get updated to top level nn
Layer 1 Pruned after cluster pruning : 20.97
Layer 2 Pruned after cluster pruning : 9.76
Layer 3 Pruned after cluster pruning : 44.39
epoch 10/10. Took 9.9801 seconds. Mini-batch mean squared error on training set is 0.41747; Full-batch train err = 0.402345
TRAINING Accuracy: 34.80%.
Test Accuracy: 35.70%.
Pruned percentage of Layer 1: 20.97%.
Fraction of synapses unclustered = 0.2791
Number of clusters = 253
Pruned percentage of Layer 2: 9.76%.
Fraction of synapses unclustered = 0.1164
Number of clusters = 468
Pruned percentage of Layer 3: 44.39%.
Fraction of synapses unclustered = 0.0987
Number of clusters = 8
Hardware Parameters for online clustered network
Training effort in terms of number of epochs: 10
Number of mPEs needed after transformation: 107936
Number of mPEs needed after transformation: 132100
Number of mPEs needed after transformation: 1024
